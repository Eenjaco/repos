# ðŸ› ï¸ Workspace Guide - How We Work Together

**Last Updated**: 2025-11-14
**Created for**: Mac (Eenjaco)

---

## ðŸ“‹ Quick Reference

**When working with Mac:**
- âœ… Use **step-by-step commands** (one at a time)
- âœ… Provide **complete code blocks** ready to copy-paste
- âœ… **Avoid**: vim, heredocs, complex bash syntax
- âœ… Prefer: Python 3.13, simple bash scripts, interactive menus
- âœ… Color scheme: Green (#42), Grey (#240) for consistency

---

## ðŸ’» System Environment

### Hardware & OS
- **Computer**: Mac (8GB RAM)
- **OS**: macOS (using bash 3.2)
- **Terminal**: zsh with oh-my-zsh
- **Location**: `~/Documents/Applications/repos/`

### Python Setup
- **Preferred**: Python 3.13 (`/usr/local/bin/python3.13`)
- **Avoid**: Python 3.14 (too new, breaks libraries like numba/librosa)
- **Also Available**: Python 3.12, 3.14
- **Virtual Envs**: Always use `venv`, activate before work

### Key Tools Installed
- **Audio**: ffmpeg, Vosk, Whisper, llama3.2:1b
- **PDF**: pandoc, poppler-utils
- **Dev**: git, npm, pytest
- **Databases**: SQLite

---

## ðŸŽ¯ Working Preferences

### Communication Style
1. **Give exact commands** - not descriptions
2. **One command at a time** - wait for confirmation
3. **Explain what each command does** - brief comment
4. **Show expected output** - so Mac knows it worked
5. **Provide troubleshooting** - if command fails

### Code Creation
**DO:**
- âœ… Create files with simple `cat > file << 'EOF'` OR Python scripts
- âœ… Give complete, ready-to-run code blocks
- âœ… Use clear variable names and comments
- âœ… Test commands before suggesting
- âœ… Show how to verify it worked

**DON'T:**
- âŒ Open vim/nano (Mac struggles with these)
- âŒ Use complex heredocs (causes confusion)
- âŒ Assume Mac knows syntax
- âŒ Skip steps
- âŒ Use Python 3.14

### File Operations
```bash
# GOOD - Clear and simple
cat > myfile.txt << 'EOF'
content here
EOF

# BETTER - Using Python to avoid heredoc issues
python3 << 'END'
with open('myfile.txt', 'w') as f:
    f.write("content here")
END

# BEST - Provide a helper script Mac can save and run
# (see pattern below)
```

---

## ðŸ“ Project Patterns (Learned from Existing Code)

### Common Project Structure
```
project_name/
â”œâ”€â”€ README.md              # Always present, clear docs
â”œâ”€â”€ main_command           # Executable bash/python script
â”œâ”€â”€ requirements.txt       # Python dependencies
â”œâ”€â”€ venv/                  # Virtual environment
â”œâ”€â”€ config/                # YAML/JSON configs
â”œâ”€â”€ samples/               # Test data
â””â”€â”€ docs/                  # Additional documentation
```

### Typical Script Pattern
```bash
#!/usr/bin/env bash
# Clear description of what this does

set -euo pipefail  # Error handling

# Colors (Mac's preferred palette)
GREEN='\033[38;5;42m'
GREY='\033[38;5;240m'
RESET='\033[0m'

# Get script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR"

# Activate venv if exists
if [[ -f venv/bin/activate ]]; then
    source venv/bin/activate
fi

# Interactive menu with clear options
echo "What do you want to do?"
echo "1) Option one"
echo "2) Option two"
read -p "Choose (1-2): " choice

# Simple error messages
if [ $? -eq 0 ]; then
    echo -e "${GREEN}âœ“${RESET} Success"
else
    echo "Error: Something failed"
    exit 1
fi
```

### Python Script Pattern
```python
#!/usr/bin/env python3
"""Clear description"""

import os
import sys
from pathlib import Path

# Colors matching bash scripts
class Colors:
    GREEN = '\033[38;5;42m'
    GREY = '\033[38;5;240m'
    RESET = '\033[0m'

def main():
    """Main function with clear flow"""
    # Simple menu
    print("Options:")
    print("1. Do thing")
    print("2. Do other thing")

    choice = input("Choose: ").strip()

    if choice == '1':
        do_thing()
    elif choice == '2':
        do_other_thing()

if __name__ == "__main__":
    main()
```

---

## ðŸ—‚ï¸ Existing Projects Overview

### 1. **time_keeping/**
- **Purpose**: iOS Shortcuts time tracking
- **Key Files**: `backup.sh`, color codes
- **Pattern**: Simple bash with SQLite
- **Takeaway**: Mac likes automated backups, clear status messages

### 2. **convert_to_markdown/** (mdcon)
- **Purpose**: Universal file â†’ Markdown converter
- **Key Files**: `mdcon` (main), `pdf_to_md*.sh`
- **Pattern**: Interactive prompts, handles PDFs/EPUB/DOCX
- **Takeaway**: Mac needs drag-and-drop file input, OCR support

### 3. **mp3_txt/**
- **Purpose**: Audio transcription (Vosk/Whisper)
- **Key Files**: `transcribe`, `mdclean*.py`
- **Pattern**: Vosk for speech, llama3.2 for cleaning
- **Takeaway**: Mac works with audio files, prefers simple commands

### 4. **strudel_sheetmusic/** (NEW - StrudelSheet)
- **Purpose**: PDF/Audio â†’ Strudel code
- **Key Files**: `cli.py`, `strudel_sheet` menu
- **Pattern**: Python CLI + interactive menu
- **Takeaway**: Mac wants menu-based interfaces, not commands

### 5. **git_docs/**
- **Purpose**: Git workflow documentation
- **Pattern**: Markdown guides, session templates
- **Takeaway**: Mac needs clear documentation

---

## ðŸŽ¨ Design Patterns

### Color Scheme (Consistent Across Projects)
```bash
GREEN='\033[38;5;42m'    # Success, prompts (tt style)
GREY='\033[38;5;240m'     # Secondary info (tt style)
YELLOW='\033[38;5;226m'   # Warnings, headers
CYAN='\033[38;5;51m'      # Highlights
RED='\033[38;5;196m'      # Errors
RESET='\033[0m'           # Reset color
```

### User Experience Principles
1. **Single command to start** - `transcribe`, `mdcon`, `strudel_sheet`
2. **Interactive menus** - numbered options, clear choices
3. **Drag & drop support** - strip quotes from pasted paths
4. **Auto-detection** - venv, dependencies, file types
5. **Clear feedback** - âœ“ for success, âœ— for errors
6. **Recoverable errors** - don't crash, show help

---

## ðŸš€ How to Create New Projects for Mac

### Step 1: Plan the Interface
```bash
# What's the main command?
# Example: myproject

# What does it do?
# Example: Converts X to Y

# What are the menu options?
# 1. Import file
# 2. Process
# 3. Export
# 4. Help
```

### Step 2: Create Simple Script Template
```bash
# Create executable menu
cat > myproject << 'EOF'
#!/usr/bin/env python3
import os, sys

GREEN='\033[38;5;42m'
GREY='\033[38;5;240m'
RESET='\033[0m'

def menu():
    print("\nðŸŽ¯ MY PROJECT\n")
    print("1. Do thing one")
    print("2. Do thing two")
    print("3. Exit")

while True:
    menu()
    choice = input(f"{GREEN}Choose: {RESET}")
    if choice == '3': break
    print(f"{GREY}Processing...{RESET}")
EOF

chmod +x myproject
python3 myproject
```

### Step 3: Add Features Incrementally
- Start with menu working
- Add one feature at a time
- Test each addition
- Keep it simple!

---

## ðŸ”§ Common Tasks Reference

### Creating Files (Mac-Friendly Methods)

**Method 1: Python (BEST - No heredoc confusion)**
```bash
python3 << 'PYTHONEOF'
with open('myfile.txt', 'w') as f:
    f.write('content here\n')
    f.write('more content\n')
print("âœ“ Created myfile.txt")
PYTHONEOF
```

**Method 2: Direct echo (Good for short content)**
```bash
echo "content" > myfile.txt
```

**Method 3: cat heredoc (OK if simple)**
```bash
cat > myfile.txt << 'EOF'
content
EOF
```

### Python Version Management
```bash
# Use Python 3.13 (recommended)
/usr/local/bin/python3.13 -m venv venv
source venv/bin/activate

# Verify version
python --version  # Should show 3.13.x

# If 3.14, recreate venv with 3.13
deactivate
rm -rf venv
python3.13 -m venv venv
source venv/bin/activate
```

### Virtual Environment Pattern
```bash
# Always check for venv first
cd ~/Documents/Applications/repos/myproject

# Activate if exists
if [ -d "venv" ]; then
    source venv/bin/activate
else
    python3.13 -m venv venv
    source venv/bin/activate
fi

# Now install/run
pip install -r requirements.txt
```

### Git Operations
```bash
# Mac is on branch: claude/mp3-underscore-research-011CV5SB9xtGR7pcBxZs6K7D
# Always check branch first
git branch

# Stash before switching
git stash
git checkout other-branch
git stash pop  # If needed
```

---

## ðŸ“š Dependency Installation Patterns

### Audio Processing
```bash
pip install librosa soundfile audioread  # Core
pip install vosk                          # Offline speech
# Whisper already installed globally
```

### PDF Processing
```bash
brew install poppler       # For pdf2image
pip install pdf2image Pillow
brew install pandoc        # For markdown conversion
```

### Standard Pattern
```bash
# Create requirements.txt without Python version line
grep -v "^python>=" requirements.txt > requirements_clean.txt
pip install -r requirements_clean.txt
```

---

## ðŸ› Troubleshooting Patterns

### Issue: "Module not found"
```bash
# Check venv is active
echo $VIRTUAL_ENV  # Should show path to venv

# If empty, activate
source venv/bin/activate

# Reinstall
pip install module_name
```

### Issue: "Python 3.14 not supported"
```bash
# Recreate with 3.13
deactivate
rm -rf venv
python3.13 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Issue: "Command not found"
```bash
# Add to PATH or create alias in ~/.zshrc
echo 'alias mycommand="cd ~/path && python3 script.py"' >> ~/.zshrc
source ~/.zshrc
```

### Issue: File creation failed (vim opened)
```bash
# Use Python method instead
python3 << 'END'
with open('file.txt', 'w') as f:
    f.write('content')
END
```

---

## ðŸŽ¯ Communication Protocol

### When Mac Asks for Help

**Mac will likely say:**
- "I'm struggling with..."
- "Give me exact commands..."
- "Step by step..."
- "What do I copy?"

**You should respond:**
1. **Acknowledge**: "I'll make this simple"
2. **Give ONE command** to copy-paste
3. **Say what it does**: "This creates the file"
4. **Show expected output**: "You should see: âœ“ Success"
5. **Wait for Mac's response** before next step

### Example Good Response
```
Let's create the file. Copy and paste this:

```bash
python3 << 'EOF'
with open('config.yaml', 'w') as f:
    f.write('setting: value\n')
print("âœ“ Created config.yaml")
EOF
```

This creates config.yaml with your settings.

Expected output:
```
âœ“ Created config.yaml
```

Did that work?
```

### Example Bad Response
```
Just use heredoc to create the file, then edit it with vim, and make sure you're using the right Python version.
```
(Too vague, multiple steps, mentions vim)

---

## ðŸ“ Project Creation Checklist

When creating a new project for Mac:

- [ ] Single command name (no spaces, lowercase)
- [ ] Executable bash or Python script
- [ ] Interactive menu (numbered options)
- [ ] Color scheme: Green/Grey/Yellow
- [ ] Drag & drop file input (strip quotes)
- [ ] Auto-detects dependencies
- [ ] Clear error messages
- [ ] README.md with examples
- [ ] Works with Python 3.13
- [ ] Virtual environment included
- [ ] Alias-friendly name

---

## ðŸ”„ Session Workflow

### Starting a Session
1. Check current directory: `pwd`
2. Check current branch: `git branch`
3. Activate venv if needed: `source venv/bin/activate`
4. Check Python version: `python --version`
5. Proceed with work

### During Session
- Give commands one at a time
- Wait for Mac's output
- Verify each step worked
- If error, troubleshoot immediately
- Keep terminal output visible

### Ending Session
- Commit changes if needed
- Note what was accomplished
- Note any pending tasks
- Update this guide if patterns changed

---

## ðŸ’¡ Mac's Skill Level

### Comfortable With:
- Basic bash commands (`cd`, `ls`, `cp`, `mv`)
- Running single commands
- Copy-pasting code blocks
- Following numbered steps
- Using interactive menus

### Learning:
- Python syntax
- Git operations
- Virtual environments
- Debugging errors

### Avoid/Simplify:
- Complex bash syntax
- Heredocs with variables
- Vim/modal editors
- Multi-step pipes
- Regex in commands

---

## ðŸŽµ Current Active Projects

1. **strudel_sheet** - Music analysis â†’ Strudel code (NEW!)
2. **mp3_txt** - Audio transcription tools
3. **convert_to_markdown** - PDF/file conversion
4. **time_keeping** - Time tracking with iOS

---

## ðŸ Quick Commands Reference

```bash
# Navigate to repos
cd ~/Documents/Applications/repos

# List projects
ls -d */

# Activate any project's venv
cd project_name && source venv/bin/activate

# Check Python version
python --version

# Create new project structure
mkdir -p new_project/{src,docs,samples,tests}
cd new_project
python3.13 -m venv venv
source venv/bin/activate

# Common aliases (if set up)
tt              # Time tracking
mdcon           # Markdown converter
transcribe      # Audio transcription
strudel_sheet   # Music converter (if aliased)
```

---

## ðŸ“Œ Remember

- Mac has 8GB RAM - keep processes light
- Mac prefers interactive menus over command flags
- Mac uses drag-and-drop - always strip quotes from paths
- Mac's color scheme: Green (#42) and Grey (#240)
- Python 3.13 is the sweet spot (3.14 breaks things)
- One step at a time = success

---

**This is a living document. Update it as we discover new patterns!**
